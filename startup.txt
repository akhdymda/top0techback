# SQLite3の設定
export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/home/site/wwwroot/venv/lib/python3.12/site-packages"
python -m pip install --upgrade pip
python -m pip install --no-cache-dir pysqlite3-binary==0.5.4
# エラー解決のために絶対パスでインストールディレクトリを指定
export PYTHONPATH="$PYTHONPATH:/home/site/wwwroot/venv/lib/python3.12/site-packages"
python -m pip install --no-cache-dir pydantic-settings==2.2.1
python -m pip install --no-cache-dir email-validator==2.1.0.post1
echo "Installed required packages"

# ChromaDBの初期化
echo "Initializing ChromaDB..."
python init_chroma.py

# アプリの起動
python -m uvicorn app:app --host 0.0.0.0